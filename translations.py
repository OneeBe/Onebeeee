
translations = {
    'ru': {
        # Navigation
        'leaderboard': 'Таблица лидеров',
        'leaders': 'Лидеры',
        'statistics': 'Статистика',
        'quests': 'Квесты',
        'achievements': 'Достижения',
        'clans': 'Кланы',
        'tournaments': 'Турниры',
        'shop': 'Магазин',
        'profile': 'Профиль',
        'themes': 'Темы',
        'login': 'Вход',
        'logout': 'Выйти',
        'admin': 'Админ',
        
        # Stats
        'level': 'Уровень',
        'kills': 'Киллы',
        'deaths': 'Смерти',
        'wins': 'Победы',
        'games': 'Игры',
        'kd_ratio': 'K/D',
        'win_rate': '% побед',
        'beds_broken': 'Кровати',
        'final_kills': 'Финальные киллы',
        'coins': 'Койны',
        'reputation': 'Репутация',
        'experience': 'Опыт',
        'role': 'Роль',
        'server': 'Сервер',
        
        # UI
        'search': 'Поиск игроков...',
        'search_placeholder': 'Введите ник игрока',
        'save': 'Сохранить',
        'cancel': 'Отмена',
        'edit': 'Редактировать',
        'delete': 'Удалить',
        'back': 'Назад',
        'next': 'Далее',
        'loading': 'Загрузка...',
        'error': 'Ошибка',
        'success': 'Успешно',
        'sort_by': 'Сортировать по:',
        'show_per_page': 'Показывать на странице:',
        
        # Profile
        'my_profile': 'Мой профиль',
        'edit_profile': 'Редактировать профиль',
        'social_networks': 'Социальные сети',
        'about_player': 'О игроке',
        'gaming_preferences': 'Игровые предпочтения',
        'personal_info': 'Личная информация',
        'player_stats': 'Статистика игрока',
        'created_at': 'Регистрация',
        'last_updated': 'Последнее обновление',
        'birthday': 'День рождения',
        'location': 'Местоположение',
        'bio': 'Биография',
        'custom_role_locked': 'Произвольная роль заблокирована',
        'custom_role_unlock_level': 'Для разблокировки произвольной роли требуется:',
        'level_500_plus': '500+ уровень (у вас {level})',
        'or_purchase_custom_role': 'Или покупка кастомной роли в магазине',
        'remaining_levels': 'Осталось: {remaining} уровней',
        
        # Shop
        'buy': 'Купить',
        'price': 'Цена',
        'unlock_level': 'Открывается с {level} уровня',
        'already_purchased': 'Уже приобретено',
        'insufficient_coins': 'Недостаточно койнов',
        'insufficient_reputation': 'Недостаточно репутации',
        
        # Admin
        'total_players': 'Всего игроков',
        'total_kills': 'Всего киллов',
        'total_games': 'Всего игр',
        'add_player': 'Добавить игрока',
        'player_management': 'Управление игроками',
        'role_management': 'Управление ролями',
        
        # Time
        'seconds_ago': '{seconds} сек. назад',
        'minutes_ago': '{minutes} мин. назад',
        'hours_ago': '{hours} ч. назад',
        'days_ago': '{days} дн. назад',
        
        # Footer
        'modern_rating_system': 'Современная система рейтинга и роcков',
        'language': 'Язык',
        'russian': 'Русский',
        'ukrainian': 'Украинский',  
        'english': 'Английский',
        
        # Page titles
        'best_minecraft_bedwars_players': 'Лучшие игроки Minecraft Bedwars',
        'detailed_statistics': 'Подробная статистика',
        'top_players': 'Топ игроков',
        
        # Guides
        'how_to_earn_coins': 'Как заработать койны?',
        'how_to_earn_reputation': 'Как заработать репутацию?',
        'coins_guide_title': 'Полное руководство по заработку койнов',
        'reputation_guide_title': 'Полное руководство по заработку репутации'
    },
    'ua': {
        # Navigation
        'leaderboard': 'Таблиця лідерів',
        'leaders': 'Лідери',
        'statistics': 'Статистика',
        'quests': 'Квести',
        'achievements': 'Досягнення',
        'clans': 'Клани',
        'tournaments': 'Турніри',
        'shop': 'Магазин',
        'profile': 'Профіль',
        'themes': 'Теми',
        'login': 'Вхід',
        'logout': 'Вийти',
        'admin': 'Адмін',
        
        # Stats
        'level': 'Рівень',
        'kills': 'Вбивства',
        'deaths': 'Смерті',
        'wins': 'Перемоги',
        'games': 'Ігри',
        'kd_ratio': 'K/D',
        'win_rate': '% перемог',
        'beds_broken': 'Ліжка',
        'final_kills': 'Фінальні вбивства',
        'coins': 'Монети',
        'reputation': 'Репутація',
        'experience': 'Досвід',
        'role': 'Роль',
        'server': 'Сервер',
        
        # UI
        'search': 'Пошук гравців...',
        'search_placeholder': 'Введіть нік гравця',
        'save': 'Зберегти',
        'cancel': 'Скасувати',
        'edit': 'Редагувати',
        'delete': 'Видалити',
        'back': 'Назад',
        'next': 'Далі',
        'loading': 'Завантаження...',
        'error': 'Помилка',
        'success': 'Успішно',
        'sort_by': 'Сортувати за:',
        'show_per_page': 'Показувати на сторінці:',
        
        # Profile
        'my_profile': 'Мій профіль',
        'edit_profile': 'Редагувати профіль',
        'social_networks': 'Соціальні мережі',
        'about_player': 'Про гравця',
        'gaming_preferences': 'Ігрові налаштування',
        'personal_info': 'Особиста інформація',
        'player_stats': 'Статистика гравця',
        'created_at': 'Реєстрація',
        'last_updated': 'Останнє оновлення',
        'birthday': 'День народження',
        'location': 'Розташування',
        'bio': 'Біографія',
        'custom_role_locked': 'Довільна роль заблокована',
        'custom_role_unlock_level': 'Для розблокування довільної ролі потрібно:',
        'level_500_plus': '500+ рівень (у вас {level})',
        'or_purchase_custom_role': 'Або покупка кастомної ролі в магазині',
        'remaining_levels': 'Залишилось: {remaining} рівнів',
        
        # Shop
        'buy': 'Купити',
        'price': 'Ціна',
        'unlock_level': 'Відкривається з {level} рівня',
        'already_purchased': 'Вже придбано',
        'insufficient_coins': 'Недостатньо монет',
        'insufficient_reputation': 'Недостатньо репутації',
        
        # Admin
        'total_players': 'Всього гравців',
        'total_kills': 'Всього вбивств',
        'total_games': 'Всього ігор',
        'add_player': 'Додати гравця',
        'player_management': 'Управління гравцями',
        'role_management': 'Управління ролями',
        
        # Time
        'seconds_ago': '{seconds} сек. тому',
        'minutes_ago': '{minutes} хв. тому',
        'hours_ago': '{hours} год. тому',
        'days_ago': '{days} дн. тому',
        
        # Footer
        'modern_rating_system': 'Сучасна система рейтингу та росків',
        'language': 'Мова',
        'russian': 'Російська',
        'ukrainian': 'Українська',
        'english': 'Англійська',
        
        # Page titles
        'best_minecraft_bedwars_players': 'Кращі гравці Minecraft Bedwars',
        'detailed_statistics': 'Детальна статистика',
        'top_players': 'Топ гравців',
        
        # Guides
        'how_to_earn_coins': 'Як заробити монети?',
        'how_to_earn_reputation': 'Як заробити репутацію?',
        'coins_guide_title': 'Повне керівництво по заробітку монет',
        'reputation_guide_title': 'Повне керівництво по заробітку репутації'
    },
    'en': {
        # Navigation
        'leaderboard': 'Leaderboard',
        'leaders': 'Leaders',
        'statistics': 'Statistics',
        'quests': 'Quests',
        'achievements': 'Achievements',
        'clans': 'Clans',
        'tournaments': 'Tournaments',
        'shop': 'Shop',
        'profile': 'Profile',
        'themes': 'Themes',
        'login': 'Login',
        'logout': 'Logout',
        'admin': 'Admin',
        
        # Stats
        'level': 'Level',
        'kills': 'Kills',
        'deaths': 'Deaths',
        'wins': 'Wins',
        'games': 'Games',
        'kd_ratio': 'K/D',
        'win_rate': 'Win Rate',
        'beds_broken': 'Beds',
        'final_kills': 'Final Kills',
        'coins': 'Coins',
        'reputation': 'Reputation',
        'experience': 'Experience',
        'role': 'Role',
        'server': 'Server',
        
        # UI
        'search': 'Search players...',
        'search_placeholder': 'Enter player nickname',
        'save': 'Save',
        'cancel': 'Cancel',
        'edit': 'Edit',
        'delete': 'Delete',
        'back': 'Back',
        'next': 'Next',
        'loading': 'Loading...',
        'error': 'Error',
        'success': 'Success',
        'sort_by': 'Sort by:',
        'show_per_page': 'Show per page:',
        
        # Profile
        'my_profile': 'My Profile',
        'edit_profile': 'Edit Profile',
        'social_networks': 'Social Networks',
        'about_player': 'About Player',
        'gaming_preferences': 'Gaming Preferences',
        'personal_info': 'Personal Info',
        'player_stats': 'Player Statistics',
        'created_at': 'Registration',
        'last_updated': 'Last Updated',
        'birthday': 'Birthday',
        'location': 'Location',
        'bio': 'Biography',
        'custom_role_locked': 'Custom Role Locked',
        'custom_role_unlock_level': 'To unlock custom role requires:',
        'level_500_plus': '500+ level (you have {level})',
        'or_purchase_custom_role': 'Or purchase custom role in shop',
        'remaining_levels': 'Remaining: {remaining} levels',
        
        # Shop
        'buy': 'Buy',
        'price': 'Price',
        'unlock_level': 'Unlocks at level {level}',
        'already_purchased': 'Already Purchased',
        'insufficient_coins': 'Insufficient Coins',
        'insufficient_reputation': 'Insufficient Reputation',
        
        # Admin
        'total_players': 'Total Players',
        'total_kills': 'Total Kills',
        'total_games': 'Total Games',
        'add_player': 'Add Player',
        'player_management': 'Player Management',
        'role_management': 'Role Management',
        
        # Time
        'seconds_ago': '{seconds}s ago',
        'minutes_ago': '{minutes}m ago',
        'hours_ago': '{hours}h ago',
        'days_ago': '{days}d ago',
        
        # Footer
        'modern_rating_system': 'Modern rating and ranking system',
        'language': 'Language',
        'russian': 'Russian',
        'ukrainian': 'Ukrainian',
        'english': 'English',
        
        # Page titles
        'best_minecraft_bedwars_players': 'Best Minecraft Bedwars Players',
        'detailed_statistics': 'Detailed Statistics',
        'top_players': 'Top Players',
        
        # Guides
        'how_to_earn_coins': 'How to Earn Coins?',
        'how_to_earn_reputation': 'How to Earn Reputation?',
        'coins_guide_title': 'Complete Guide to Earning Coins',
        'reputation_guide_title': 'Complete Guide to Earning Reputation'
    }
}

def get_translation(key, lang='ru', **kwargs):
    """Get translation for key in specified language"""
    translation = translations.get(lang, {}).get(key, translations['ru'].get(key, key))
    if kwargs:
        try:
            return translation.format(**kwargs)
        except (KeyError, ValueError):
            return translation
    return translation

def register_translation_filter(app):
    """Register translation filter for Jinja2"""
    @app.template_filter('t')
    def translate_filter(key, **kwargs):
        from flask import session
        lang = session.get('language', 'ru')
        return get_translation(key, lang, **kwargs)
    
    return translate_filter
